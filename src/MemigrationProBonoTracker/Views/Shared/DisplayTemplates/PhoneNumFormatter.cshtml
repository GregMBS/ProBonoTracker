@model String

@if (Model != null)
{
    var value = String.Format("{0:(###) ###-#### x}{1}", Model.Substring(0, 10), Model.Substring(10));

    if (!string.IsNullOrEmpty(value))
    {
        long phoneDigits;
        if (long.TryParse(value, out phoneDigits))
        {
            var cleanPhoneDigits = phoneDigits.ToString();
            var digitCount = cleanPhoneDigits.Length;

            if (digitCount == 10)
            {
                <text>@string.Format("{0:(###) ###-####}", phoneDigits)</text>}
            else if (digitCount > 10)
            {
                <text>@string.Format("{0:(###) ###-#### x#########}", phoneDigits)</text>}
            else
            {
                <text>@cleanPhoneDigits</text>}
        }
    }
}